<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Questões para Treino</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.min.js"></script>

    <style>
.final-score {
    font-size: 2.5rem;
    font-weight: bold;
    margin: 20px 0;
    transition: color 0.3s ease;
}

.final-percentage {
    font-size: 1.5rem;
    margin-bottom: 30px;
    transition: color 0.3s ease;
}

.score-divider {
    color: var(--gray);
    margin: 0 5px;
}

.score-10 {
    font-size: 0.9em;
}

.score-animation {
    animation: pulse 0.5s ease;
}

@keyframes pulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

.header-buttons {
    display: flex;
    gap: 15px;
    align-items: center;
}

/* Novo estilo para o botão de toggle do modo noturno */
.dark-mode-toggle {
    background-color: var(--gray-light);
    border: none;
    border-radius: 50px;
    padding: 5px;
    width: 60px;
    height: 30px;
    cursor: pointer;
    position: relative;
    display: flex;
    align-items: center;
    transition: background-color 0.3s ease;
}

.dark-mode-toggle.active {
    background-color: var(--dark);
}

.toggle-icon {
    position: absolute;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background-color: var(--white);
    display: flex;
    align-items: center;
    justify-content: center;
    left: 3px;
    transition: all 0.3s ease;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
}

.dark-mode-toggle.active .toggle-icon {
    left: calc(100% - 27px);
    background-color: var(--primary);
}

.toggle-icon i {
    font-size: 14px;
    transition: all 0.3s ease;
}

.sun-icon {
    color: #FFD700;
    opacity: 1;
}

.moon-icon {
    color: white;
    opacity: 0;
    transform: rotate(-90deg);
}

.dark-mode-toggle.active .sun-icon {
    opacity: 0;
    transform: rotate(90deg);
}

.dark-mode-toggle.active .moon-icon {
    opacity: 1;
    transform: rotate(0deg);
}

/* Ajuste para o container do botão */
.dark-mode-container {
    display: flex;
    align-items: center;
    gap: 10px;
}

.quiz-action-button {
    background-color: var(--primary);
    color: white;
    border: none;
    border-radius: var(--border-radius);
    padding: 10px 15px;
    font-family: 'Poppins', sans-serif;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
}

.quiz-home-button {
    background-color: var(--primary);
    color: white;
    border: none;
    border-radius: var(--border-radius);
    padding: 10px 15px;
    font-family: 'Poppins', sans-serif;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease;
    text-decoration: none;
    display: inline-block;
    text-align: center;
}

.quiz-action-button:hover,
.quiz-home-button:hover {
    background-color: var(--primary);
    transform: translateY(-2px);
    box-shadow: var(--shadow);
}













/* Estilos para a caixa de imagem */
.image-box {
    width: 100%;
    max-width: 600px;
    margin: 15px auto;
    border: 2px solid var(--gray);
    border-radius: 10px;
    overflow: hidden;
    background-color: var(--white);
    box-shadow: var(--shadow);
}

.image-placeholder {
    padding: 30px;
    text-align: center;
    background-color: var(--gray-light);
    color: var(--dark);
    cursor: pointer;
    transition: var(--transition);
    font-weight: 500;
}

.image-placeholder:hover {
    background-color: var(--gray);
    color: var(--white);
}


/* Popup de imagem */
.image-popup {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.9);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 2000;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
}

.image-popup.active {
    opacity: 1;
    visibility: visible;
}
        
.image-popup-content {
    position: relative;
    max-width: 90%;
    max-height: 90%;
    width: auto;
    height: auto;
    background: var(--white);
    border-radius: var(--border-radius);
    padding: 20px;
    box-shadow: var(--shadow);
}

.image-popup-img {
    max-width: 100%;
    max-height: 80vh;
    display: block;
    margin: 0 auto;
}

.image-popup-close {
    position: absolute;
    top: 10px;
    right: 10px;
    background: var(--primary);
    color: white;
    border: none;
    border-radius: 50%;
    width: 30px;
    height: 30px;
    font-size: 18px;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Ajustes para mobile */
@media (max-width: 768px) {
    .header-buttons {
        flex-direction: column;
        width: 100%;
    }

    .quiz-action-button,
    .quiz-home-button {
        width: 100%;
    }


    .dark-mode-container {
        width: 100%;
        justify-content: center;
    }

    .image-popup-content {
        max-width: 95%;
        padding: 15px;
    }





    .image-popup-img {
        max-height: 70vh;
    }

    .image-placeholder {
        padding: 20px;
    }
}

/* Estilos para o feedback */
.feedback-mistake-option {
    padding: 10px;
    margin: 5px 0;
    border-radius: 5px;
    border-left: 4px solid transparent;
}

.feedback-mistake-option.correct {
    background-color: rgba(46, 204, 113, 0.1);
    border-left-color: #2ecc71;
    color: #2ecc71;
}

.feedback-mistake-option.incorrect {
    background-color: rgba(231, 76, 60, 0.1);
    border-left-color: #e74c3c;
    color: #e74c3c;
}

.correct-tag {
    color: #2ecc71;
    font-weight: bold;
    margin-left: 8px;
}

.incorrect-tag {
    color: #e74c3c;
    font-weight: bold;
    margin-left: 8px;
}
    </style>
</head>
<body>
   <div class="container">
        <!-- Página do Quiz -->
        <div id="quizPage">
            <div class="header">
                <h1>Treino de Questões</h1>
                <div class="header-buttons">
                    <div class="dark-mode-container">
                        <button class="dark-mode-toggle" id="darkModeToggle">
                            <span class="toggle-icon">
                                <i class="fas fa-sun sun-icon"></i>
                                <i class="fas fa-moon moon-icon"></i>
                            </span>
                        </button>
                        <span id="darkModeLabel">Modo Escuro</span>
                    </div>
                    <a href="index.html" class="quiz-home-button">Página Principal</a>
                </div>
            </div>

            <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>

            <div id="questionContainer">
                <!-- As questões serão inseridas aqui dinamicamente -->
            </div>

            <div class="navigation">
                <button class="nav-button" id="prevButton" disabled>Anterior</button>
                <button class="nav-button" id="nextButton">Próxima</button>
                <button class="nav-button" id="submitButton" style="display: none;">Finalizar Prova</button>
            </div>
        </div>

        <!-- Página de Resultados -->
        <div id="resultsPage">
            <div class="results-header">
                <h1>Resultados do Teste</h1>
                <div class="final-score" id="finalScore"></div>
                <div class="final-percentage" id="finalPercentage"></div>
            </div>

            <div class="stats-grid">
                <div class="stat-card">
                    <h3>Desempenho Geral</h3>
                    <div class="chart-container">
                        <canvas id="performanceChart"></canvas>
                    </div>
                </div>
                <div class="stat-card">
                    <h3>Progresso</h3>
                    <div class="chart-container">
                        <canvas id="progressChart"></canvas>
                    </div>
                </div>
                <div class="stat-card">
                    <h3>Questões com Erros</h3>
                    <div class="chart-container">
                        <canvas id="mistakesChart"></canvas>
                    </div>
                </div>
                <div class="stat-card">
                    <h3>Distribuição de Dificuldade</h3>
                    <div class="chart-container">
                        <canvas id="difficultyChart"></canvas>
                    </div>
                </div>
            </div>

            <div class="additional-stats">
                <h2>Análise Detalhada</h2>
                <div class="additional-charts">
                    <div class="stat-card">
                        <h3>Tempo por Questão</h3>
                        <div class="chart-container">
                            <canvas id="timePerQuestionChart"></canvas>
                        </div>
                    </div>
                    <div class="stat-card">
                        <h3>Evolução do Desempenho</h3>
                        <div class="chart-container">
                            <canvas id="performanceEvolutionChart"></canvas>
                        </div>
                    </div>
                </div>
            </div>

            <div class="actions">
                <button class="quiz-action-button" id="restartButton">Resolver mais questões</button>
                <button class="quiz-action-button" id="reviewButton">Revisão das Questões</button>
                <a href="index.html" class="quiz-home-button">Página Principal</a>
            </div>
        </div>
    </div>

    <!-- Popup de Feedback -->
    <div class="feedback-popup" id="feedbackPopup">
        <div class="feedback-content">
            <button class="feedback-close" id="feedbackClose">&times;</button>
            <h2 class="feedback-title">Feedback Parcial</h2>
            <div class="feedback-stats">
                Você completou <span id="feedbackCompleted">5</span> questões.
                <span class="feedback-correct" id="feedbackCorrect">3</span> corretas e 
                <span class="feedback-incorrect" id="feedbackIncorrect">2</span> incorretas.
            </div>
            <div class="feedback-percentage" id="feedbackPercentage">60% de acerto</div>

            <div class="feedback-mistakes" id="feedbackMistakes">
                <!-- Erros serão inseridos aqui -->
            </div>

            <button class="feedback-continue" id="feedbackContinue">Continuar</button>
        </div>
    </div>

    <!-- Popup de Imagem -->
    <div class="image-popup" id="imagePopup">
        <div class="image-popup-content">
            <button class="image-popup-close" id="imagePopupClose">&times;</button>
            <img id="popupImage" class="image-popup-img" src="" alt="Imagem ampliada da questão">
        </div>
    </div>

    <script>
        // Configuração do PDF.js
        pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/2.11.338/pdf.worker.min.js';

        // Variáveis globais
        let currentQuestionIndex = 0;
        let userAnswers = [];
        let testStatistics = {
            attemptsHistory: [],
            correct: [],
            incorrect: [],
            mistakesByQuestion: {},
            attemptsCount: 0,
            startTime: null,
            questionTimes: []
        };
        const charts = {};
        let currentTestQuestions = [];
        let totalQuestions = 20;
        let questionsPerFeedback = 5;

        // Inicialização
        document.addEventListener('DOMContentLoaded', function() {
            // Carregar questões
            currentTestQuestions = sampleQuestions.slice(0, totalQuestions);

            // Inicializar array de respostas e tempos
            userAnswers = new Array(currentTestQuestions.length).fill(null);
            testStatistics.questionTimes = new Array(currentTestQuestions.length).fill(0);

            // Configurar eventos
            setupEventListeners();

            // Mostrar primeira questão
            showQuestion(currentQuestionIndex);
            updateProgressBar();
        });

        function setupEventListeners() {
            document.getElementById('darkModeToggle').addEventListener('click', toggleDarkMode);
            document.getElementById('prevButton').addEventListener('click', showPreviousQuestion);
            document.getElementById('nextButton').addEventListener('click', showNextQuestion);
            document.getElementById('submitButton').addEventListener('click', finishTest);
            document.getElementById('restartButton').addEventListener('click', restartTest);
            document.getElementById('reviewButton').addEventListener('click', reviewQuestions);
            document.getElementById('feedbackClose').addEventListener('click', closeFeedback);
            document.getElementById('feedbackContinue').addEventListener('click', closeFeedback);
            document.getElementById('imagePopupClose').addEventListener('click', closeImagePopup);
        }

        function showQuestion(index) {

    if (index < 0 || index >= currentTestQuestions.length) return;

    // Registrar tempo da questão anterior
    if (testStatistics.startTime !== null && currentQuestionIndex >= 0) {
        const timeSpent = (Date.now() - testStatistics.startTime) / 1000;
        testStatistics.questionTimes[currentQuestionIndex] = timeSpent;
    }

    currentQuestionIndex = index;
    testStatistics.startTime = Date.now();

    const question = currentTestQuestions[index];
    const questionContainer = document.getElementById('questionContainer');

    let html = `
        <div class="question-container" id="currentQuestion">
            <div class="question-number">Questão ${index + 1} de ${currentTestQuestions.length}</div>
            <div class="question-text">${question.enunciado}</div>
    `;

    if (question.imagem) {
        html += `
            <div class="image-box">
                <div class="image-placeholder" onclick="showImagePopup('${question.imagem}')">
                    <span>Clique para visualizar a imagem da questão</span>
                </div>
            </div>
        `;
    }

    html += `<div class="options">`;

    // Adicionar alternativas
    for (const [key, value] of Object.entries(question.alternativas)) {
        const isChecked = userAnswers[index] === key ? 'checked' : '';
        html += `
            <label class="option">
                <input type="radio" name="answer" value="${key}" ${isChecked}>
                <span class="option-text">${key.toUpperCase()}) ${value}</span>
            </label>
        `;
    }

    html += `</div></div>`;

    questionContainer.innerHTML = html;

    // Configurar eventos das opções
    document.querySelectorAll('input[name="answer"]').forEach(radio => {
        radio.addEventListener('change', function() {
            userAnswers[index] = this.value;
            saveAnswer(index, this.value);

            // Verificar se devemos mostrar feedback após responder a questão
            if ((index + 1) % questionsPerFeedback === 0) {
                showFeedback(index + 1);
            }
        });
    });

    // Atualizar botões de navegação
    updateNavigationButtons();
}


function showImagePopup(pdfPageSpec) {
    // Extrair o nome do arquivo e número da página
    const [pdfPath, pageNumber] = pdfPageSpec.split('#page=');
    const pageNum = parseInt(pageNumber) || 1;

    // Configurar o popup
    const popup = document.getElementById('imagePopup');
    const imgElement = document.getElementById('popupImage');


    // Mostrar placeholder enquanto carrega
    imgElement.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZWVlZWVlIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0iIzY2NiI+Q2FycmVnYW5kbyBpbWFnZW0uLi48L3RleHQ+PC9zdmc+';
    popup.classList.add('active');

    // URL do PDF no seu repositório GitHub (formato raw)
    const pdfUrl = 'https://raw.githubusercontent.com/inaciomaximo/treino/main/Tutoriam2.pdf';

    // Configuração de escala para a renderização
    const scale = 1.5;

    // Usar PDF.js para carregar e renderizar a página
    pdfjsLib.getDocument({
        url: pdfUrl,
        cMapUrl: 'https://cdn.jsdelivr.net/npm/pdfjs-dist@2.11.338/cmaps/',
        cMapPacked: true
    }).promise.then(function(pdf) {
        return pdf.getPage(pageNum);
    }).then(function(page) {
        const viewport = page.getViewport({ scale: scale });
        const canvas = document.createElement('canvas');
        const context = canvas.getContext('2d');
        canvas.height = viewport.height;
        canvas.width = viewport.width;

        const renderContext = {
            canvasContext: context,
            viewport: viewport
        };

        return page.render(renderContext).promise.then(function() {
            // Converter o canvas para imagem e exibir no popup
            imgElement.src = canvas.toDataURL('image/png');
        });
    }).catch(function(error) {
        console.error('Erro ao carregar PDF:', error);
        imgElement.src = 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZWVlZWVlIi8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIyNCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZmlsbD0iI2YwMCI+RXJybyBhbyBjYXJyZWdhciBvIFBERi4gVmVyaWZpcXVlIGEgVVJMLjwvdGV4dD48L3N2Zz4=';
    });
}


        function closeImagePopup() {
            document.getElementById('imagePopup').classList.remove('active');
        }

        function updateNavigationButtons() {
            document.getElementById('prevButton').disabled = currentQuestionIndex === 0;
            document.getElementById('nextButton').disabled = currentQuestionIndex === currentTestQuestions.length - 1;
            document.getElementById('submitButton').style.display = 
                (currentQuestionIndex === currentTestQuestions.length - 1 && userAnswers[currentQuestionIndex] !== null) ? 'block' : 'none';
        }

        function saveAnswer(index, answer) {
            userAnswers[index] = answer;
            updateNavigationButtons();
        }

        function showPreviousQuestion() {
            if (currentQuestionIndex > 0) {
                showQuestion(currentQuestionIndex - 1);
            }
        }

        function showNextQuestion() {
            if (currentQuestionIndex < currentTestQuestions.length - 1) {
                showQuestion(currentQuestionIndex + 1);
            }

        }

        function updateProgressBar() {
            const answeredCount = userAnswers.filter(answer => answer !== null).length;
            const progress = (answeredCount / currentTestQuestions.length) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;
        }
        
        function finishTest() {
            // Registrar tempo da última questão
            if (testStatistics.startTime !== null) {
                const timeSpent = (Date.now() - testStatistics.startTime) / 1000;
                testStatistics.questionTimes[currentQuestionIndex] = timeSpent;
            }

            // Calcular resultados
            calculateResults();


            // Mostrar página de resultados
            document.getElementById('quizPage').style.display = 'none';
            document.getElementById('resultsPage').style.display = 'block';

            // Gerar gráficos
            generateAllCharts();
        }

        function calculateResults() {
            testStatistics.correct = [];
            testStatistics.incorrect = [];

            for (let i = 0; i < currentTestQuestions.length; i++) {
                const question = currentTestQuestions[i];
                const userAnswer = userAnswers[i];

                if (userAnswer === question.correta) {
                    testStatistics.correct.push(i);
                } else if (userAnswer !== null) {
                    testStatistics.incorrect.push(i);

                    // Registrar erros por questão
                    if (!testStatistics.mistakesByQuestion[i]) {
                        testStatistics.mistakesByQuestion[i] = 0;
                    }
                    testStatistics.mistakesByQuestion[i]++;

                }
            }

            // Registrar esta tentativa
            const score = (testStatistics.correct.length / currentTestQuestions.length) * 10;
            testStatistics.attemptsHistory.push({
                date: new Date().toISOString(),
                score: score.toFixed(1),
                correct: testStatistics.correct.length,
                total: currentTestQuestions.length,
                time: testStatistics.questionTimes.reduce((a, b) => a + b, 0)
            });

            testStatistics.attemptsCount++;

            // Resetar estatísticas após 20 provas
            if (testStatistics.attemptsCount >= 20) {
                testStatistics = {
                    attemptsHistory: [],
                    correct: [],
                    incorrect: [],
                    mistakesByQuestion: {},
                    attemptsCount: 0,
                    startTime: null,
                    questionTimes: []
                };
            }
        }

        function generateAllCharts() {
            generatePerformanceChart();
            generateProgressChart();
            generateMistakesChart();
            generateDifficultyChart();
            generateTimePerQuestionChart();
            generatePerformanceEvolutionChart();
            updateTextResults();
        }

        function generatePerformanceChart() {
            const ctx = document.getElementById('performanceChart').getContext('2d');
            const correctColor = getComputedStyle(document.body).getPropertyValue('--correct');
            const incorrectColor = getComputedStyle(document.body).getPropertyValue('--incorrect');

            if (charts.performance) {
                charts.performance.destroy();
            }

            charts.performance = new Chart(ctx, {
                type: 'pie',
                data: {
                    labels: ['Acertos', 'Erros'],
                    datasets: [{
                        data: [testStatistics.correct.length, testStatistics.incorrect.length],
                        backgroundColor: [correctColor, incorrectColor],
                        borderWidth: 1
                    }]
                },
                options: getChartOptions('Desempenho Geral')
            });
        }

        function generateProgressChart() {
            const ctx = document.getElementById('progressChart').getContext('2d');
            const primaryColor = getComputedStyle(document.body).getPropertyValue('--primary');

            if (charts.progress) {
                charts.progress.destroy();
            }

            const labels = testStatistics.attemptsHistory.map((_, i) => `Tentativa ${i + 1}`);
            const data = testStatistics.attemptsHistory.map(a => parseFloat(a.score));

            charts.progress = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Nota (0-10)',
                        data: data,
                        borderColor: primaryColor,
                        backgroundColor: primaryColor,
                        borderWidth: 2,
                        tension: 0.1,
                        fill: false
                    }]
                },
                options: getChartOptions('Progresso nas Tentativas', {
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 10,
                            ticks: { stepSize: 1 }
                        }
                    }
                })
            });
        }

        function generateMistakesChart() {
            const ctx = document.getElementById('mistakesChart').getContext('2d');
            const incorrectColor = getComputedStyle(document.body).getPropertyValue('--incorrect');

            if (charts.mistakes) {
                charts.mistakes.destroy();
            }




            const mistakesData = getTopMistakes();

            charts.mistakes = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: mistakesData.labels,
                    datasets: [{
                        label: 'Vezes errada',
                        data: mistakesData.values,
                        backgroundColor: incorrectColor,
                        borderWidth: 1
                    }]
                },
                options: getChartOptions('Questões com Mais Erros', {
                    plugins: {
                        tooltip: {
                            callbacks: {
                                afterLabel: function(context) {
                                    const qIndex = mistakesData.questions[context.dataIndex];
                                    const question = currentTestQuestions[qIndex];
                                    return `Resposta correta: ${question.correta.toUpperCase()}`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            ticks: { stepSize: 1 }
                        }
                    }
                })
            });
        }

        function getTopMistakes() {
            const labels = [];
            const values = [];
            const questions = [];

            const sortedEntries = Object.entries(testStatistics.mistakesByQuestion)
                .sort((a, b) => b[1] - a[1])
                .slice(0, 5); // Top 5 questões mais erradas



            sortedEntries.forEach(([qIndex, count]) => {
                labels.push(`Q${parseInt(qIndex) + 1}`);
                values.push(count);
                questions.push(parseInt(qIndex));
            });

            return { labels, values, questions };
        }

        function generateDifficultyChart() {
            const ctx = document.getElementById('difficultyChart').getContext('2d');
          
            if (charts.difficulty) {
                charts.difficulty.destroy();
            }
            
            // Dados simulados de dificuldade
            charts.difficulty = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: ['Fácil', 'Médio', 'Difícil'],
                    datasets: [{
                        data: [3, 2, 2], // Ajuste conforme suas questões
                        backgroundColor: ['#2ecc71', '#f39c12', '#e74c3c'],
                        borderWidth: 1
                    }]
                },
                options: getChartOptions('Distribuição de Dificuldade')
            });
        }

        function generateTimePerQuestionChart() {
            const ctx = document.getElementById('timePerQuestionChart').getContext('2d');
            const primaryColor = getComputedStyle(document.body).getPropertyValue('--primary');

            if (charts.timePerQuestion) {
                charts.timePerQuestion.destroy();
            }

            const labels = Array.from({length: currentTestQuestions.length}, (_, i) => `Q${i+1}`);
            const data = testStatistics.questionTimes.length > 0 ? 
                testStatistics.questionTimes : 
                Array.from({length: currentTestQuestions.length}, () => Math.floor(Math.random() * 60) + 30);

            charts.timePerQuestion = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Tempo (segundos)',
                        data: data,
                        backgroundColor: primaryColor,
                        borderWidth: 1
                    }]
                },
                options: getChartOptions('Tempo por Questão', {
                    scales: {
                        y: {
                            beginAtZero: true
                        }
                    }
                })
            });
        }



        function generatePerformanceEvolutionChart() {
            const ctx = document.getElementById('performanceEvolutionChart').getContext('2d');
            const correctColor = getComputedStyle(document.body).getPropertyValue('--correct');

            if (charts.performanceEvolution) {
                charts.performanceEvolution.destroy();
            }
            const labels = Array.from({length: currentTestQuestions.length}, (_, i) => `Q${i+1}`);
            const data = [];
            let correctCount = 0;

            for (let i = 0; i < currentTestQuestions.length; i++) {
                if (userAnswers[i] === currentTestQuestions[i].correta) {
                    correctCount++;
                }
                data.push((correctCount / (i + 1)) * 100);
            }
            
            charts.performanceEvolution = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Taxa de Acertos (%)',
                        data: data,
                        borderColor: correctColor,
                        backgroundColor: 'rgba(46, 204, 113, 0.2)',
                        borderWidth: 2,
                        tension: 0.1,
                        fill: true
                    }]
                },
                options: getChartOptions('Evolução do Desempenho', {
                    scales: {
                        y: {
                            beginAtZero: true,
                            max: 100,
                            ticks: {
                                callback: function(value) {
                                    return value + '%';
                                }
                            }
                        }
                    }
                })
            });
        }
        
        function getChartOptions(title, additionalOptions = {}) {
            const textColor = getComputedStyle(document.body).getPropertyValue('--dark');

            const baseOptions = {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        labels: {
                            color: textColor
                        }
                    },
                    title: {
                        display: true,
                        text: title,
                        color: textColor,
                        font: {
                            size: 16
                        }
                    }
                },
                scales: {
                    x: {
                        ticks: {
                            color: textColor
                        },
                        grid: {
                            color: 'rgba(0, 0, 0, 0.1)'
                        }
                    },
                    y: {
                        ticks: {
                            color: textColor
                        },
                        grid: {
                            color: 'rgba(0, 0, 0, 0.1)'
                        }
                    }
                }
            };

            return {
                ...baseOptions,
                ...additionalOptions,
                plugins: {
                    ...baseOptions.plugins,
                    ...(additionalOptions.plugins || {})
                },
                scales: {
                    ...baseOptions.scales,
                    ...(additionalOptions.scales || {})
                }
            };
        }

       function updateTextResults() {
    const correctCount = testStatistics.correct.length;
    const totalQuestions = currentTestQuestions.length;
    const percentage = ((correctCount / totalQuestions) * 100).toFixed(1);
    const totalTime = testStatistics.questionTimes.reduce((a, b) => a + b, 0);
    const avgTime = (totalTime / totalQuestions).toFixed(1);
    const score = (correctCount / totalQuestions) * 10;

    const finalScoreElement = document.getElementById('finalScore');
    const finalPercentageElement = document.getElementById('finalPercentage');

    // Formatando a nota para mostrar como "X/Y" (acertos/total) e "X.Y/10"
    finalScoreElement.innerHTML = `
        <span>${correctCount}/${totalQuestions}</span>
        <span class="score-divider"> | </span>
        <span class="score-10">${score.toFixed(1)}/10</span>
    `;

    finalPercentageElement.textContent = `${percentage}% de acerto (${avgTime}s por questão)`;

    // Aplicar cores conforme a nota
    if (score < 6) {
        finalScoreElement.style.color = '#e74c3c'; // Vermelho
        finalPercentageElement.style.color = '#e74c3c';
    } else if (score >= 6 && score < 8) {
        finalScoreElement.style.color = '#f39c12'; // Laranja/amarelo
        finalPercentageElement.style.color = '#f39c12';
    } else {
        finalScoreElement.style.color = '#2ecc71'; // Verde
        finalPercentageElement.style.color = '#2ecc71';
    }

    // Adicionar classe para animação
    finalScoreElement.classList.add('score-animation');
    setTimeout(() => {
        finalScoreElement.classList.remove('score-animation');
    }, 1000);
}

function showFeedback(completedCount) {
    completedCount = Math.min(completedCount, currentTestQuestions.length);

    const currentAnswers = userAnswers.slice(0, completedCount);
    const currentQuestions = currentTestQuestions.slice(0, completedCount);

    let correctCount = 0;
    const wrongQuestions = [];

    for (let i = 0; i < completedCount; i++) {
        if (currentAnswers[i] === currentQuestions[i].correta) {
            correctCount++;
        } else if (currentAnswers[i] !== null) {
            wrongQuestions.push(i);
        }
    }

    // Atualizar estatísticas
    document.getElementById('feedbackCompleted').textContent = completedCount;
    document.getElementById('feedbackCorrect').textContent = correctCount;
    document.getElementById('feedbackIncorrect').textContent = completedCount - correctCount;

    const percentage = ((correctCount / completedCount) * 100).toFixed(1);
    document.getElementById('feedbackPercentage').textContent = `${percentage}% de acerto`;

    const mistakesContainer = document.getElementById('feedbackMistakes');
    mistakesContainer.innerHTML = '';

    if (wrongQuestions.length > 0) {
        mistakesContainer.innerHTML = '<h3>Questões Erradas</h3>';

        wrongQuestions.forEach(index => {
            const question = currentQuestions[index];
            const userAnswer = currentAnswers[index];

            let questionHtml = `
                <div class="feedback-mistake-item">
                    <div class="feedback-mistake-question">Questão ${index + 1}: ${question.enunciado}</div>
            `;

            if (question.imagem) {
                questionHtml += `
                    <div class="image-box">
                        <div class="image-placeholder" onclick="showImagePopup('${question.imagem}')">
                            <span>Clique para visualizar a imagem da questão</span>
                        </div>
                    </div>
                `;
            }

            questionHtml += `<div class="feedback-mistake-options">`;

            // Mostrar todas as alternativas
            for (const [key, value] of Object.entries(question.alternativas)) {
                const isUserChoice = userAnswer === key;
                const isCorrectAnswer = question.correta === key;

                let optionClass = 'feedback-mistake-option';
                if (isCorrectAnswer) {
                    optionClass += ' correct';
                } else if (isUserChoice) {
                    optionClass += ' incorrect';
                }

                questionHtml += `
                    <div class="${optionClass}">
                        ${key.toUpperCase()}) ${value}
                        ${isCorrectAnswer ? '<span class="correct-tag">(Correta)</span>' : ''}
                        ${isUserChoice && !isCorrectAnswer ? '<span class="incorrect-tag">(Sua resposta)</span>' : ''}
                    </div>
                `;
            }

            questionHtml += `</div></div>`;
            mistakesContainer.innerHTML += questionHtml;
        });
    } else {
        mistakesContainer.innerHTML = '<p class="all-correct-message">🎉 Todas as questões respondidas até agora estão corretas!</p>';
    }

    document.getElementById('feedbackPopup').classList.add('active');
}
        function closeFeedback() {
            document.getElementById('feedbackPopup').classList.remove('active');
        }

        function restartTest() {
            // Voltar para a página do quiz
            document.getElementById('quizPage').style.display = 'block';
            document.getElementById('resultsPage').style.display = 'none';

            // Gerar novas questões
            currentTestQuestions = sampleQuestions.slice(0, totalQuestions);

            // Resetar respostas e tempos
            userAnswers = new Array(currentTestQuestions.length).fill(null);
            testStatistics.questionTimes = new Array(currentTestQuestions.length).fill(0);
            testStatistics.startTime = null;

            // Mostrar primeira questão
            currentQuestionIndex = 0;
            showQuestion(currentQuestionIndex);
            updateProgressBar();

            // Destruir gráficos antigos
            Object.values(charts).forEach(chart => {
                if (chart) chart.destroy();
            });
        }


        function reviewQuestions() {
            alert("Navegue pelas questões usando os botões 'Anterior' e 'Próxima' para revisar.");
            document.getElementById('quizPage').style.display = 'block';
            document.getElementById('resultsPage').style.display = 'none';
            showQuestion(0);
        }

       function toggleDarkMode() {
    const body = document.body;
    const darkModeToggle = document.getElementById('darkModeToggle');
    const darkModeLabel = document.getElementById('darkModeLabel');

    body.classList.toggle('dark-mode');
    darkModeToggle.classList.toggle('active');

    // Atualizar o texto do label
    if (body.classList.contains('dark-mode')) {
        darkModeLabel.textContent = 'Modo Claro';
    } else {
        darkModeLabel.textContent = 'Modo Escuro';
    }

    // Salvar preferência no localStorage
    localStorage.setItem('darkMode', body.classList.contains('dark-mode'));

    // Recriar gráficos para aplicar as novas cores
    if (document.getElementById('resultsPage').style.display !== 'none') {
        generateAllCharts();
    }
}

        // =============================================
        // BANCO DE QUESTÕES - EDITÁVEL
        // =============================================
        const sampleQuestions = [
            {
                enunciado: "Na tabela abaixo estão os resultados de exames de 4 pacientes gestantes. Assinale a alternativa que apresenta a correta interpretação quanto ao nivel da glicemia em cada caso.",
                imagem: "Tutoriam2.pdf#page=1",
                alternativas: {
                    a: "Pcte1: Intolerancia a Glicose, pcte 2 glicemia de jejum alterada, pcte 3 normal, pcte 4 Diabetes Mellitus.",
                    b: "Pcte1: Glicemia de Jejum alterada, pcte 2 Intolerância a glicose, pcte 3 Diabetes Melliitus, pcte 4 Normal.",
                    c: "Pcte1: Diabetes Mellitus, pcte 2 normal, pcte 3 glicemia de jejum alterada , pcte 4 Normal.",
                    d: "Pcte1: normal, pcte 2 glicemia de jejum alterada, pcte 3 Intolerância a glicose, pcte 4 Diabetes Mellitus."
                },
                correta: "d"
            },
            {
                enunciado: "Com relação ao desenvolvimento das glândulas mamárias no sexo feminino, assinale a alternativa correta:",
                imagem: null,
                alternativas: {
                    a: "Inicia-se no período puberal e só atinge o ápice do seu crescimento e desenvolvimento durante a gestação e amamentação.",
                    b: "Inicia-se na telarca, período no qual ocorre o crescimento da tumescência areolar como resposta à atividade uterina e ovariana.",
                    c: "Inicia-se na telarca, período no qual o tecido mamário se desenvolve com o crescimento dos componentes glandulares.",
                    d: "Inicia-se no período puberal e só atinge o ápice do seu crescimento e desenvolvimento na fase adulta da mulher, sendo gestante ou não."
                },
                correta: "a"
            },
            {
                enunciado: "Assinale a alternativa mais correta que indica um fator que pode ser considerado importante para a liberação da ação lactogênica da prolactina.",
                imagem: null,
                alternativas: {
                    a: "A diminuição dos níveis de cortisol livre no plasma, observada no pós-parto, devido ao aumento do nível circulante de globulinas transportadoras de corticóides, cuja síntese é estimulada pelos estrógenos.",
                    b: "A diminuição da concentração plasmática de estrógenos, observadas durante o parto, ocorre devido ao aumento do nível circulante de globulinas transportadoras de corticoides, cuja síntese é estimulada pelo cortisol livre.",
                    c: "A elevação dos níveis de cortisol livre no plasma, observada no pós-parto, devido a queda do nível circulante de globulinas transportadoras de corticóides, cuja síntese é estimulada pelos estrógenos.",
                    d: "A elevação da concentração plasmática de estrógenos, observada no parto, ocorre devido a queda do nível circulante de globulinas transportadoras de corticoides, cuja síntese é estimulada pelos corticosteróides."
                },
                correta: "c"
            },
            {
                enunciado: "Sobre a ação da prolactina nos seus receptores mamários, assinale a alternativa mais correta.",
                imagem: null,
                alternativas: {
                    a: "Com o parto e a degutação há aumento abrupto dos níveis de hormônios circulantes produzidos pela placenta.",
                    b: "Na apojadura ocorre aumento abrupto dos níveis de hormônios circulantes produzidos pela placenta.",
                    c: "Com o parto e a degutação há queda abrupta dos níveis de hormônios circulantes produzidos pela placenta.",
                    d: "Na apojadura, que ocorre 3 dias após o trabalho de parto, há diminuição de estrógeno e aumento do hormônio lactogênico placentário."
                },
                correta: "c"
            },
            {
                enunciado: "Assinale a alternativa que indica os períodos corretos da gestação onde ocorre, respectivamente: o aumento da produção de prolactina e as mudanças de coloração e pigmentação já evidentes nas aréolas mamárias.",
                imagem: null,
                alternativas: {
                    a: "No 3o trimestre e no 2o trimestre de gestação.",
                    b: "No 1o trimestre e no 2o trimestre de gestação.",
                    c: "No 2o trimestre e no 1o trimestre de gestação.",
                    d: "No 3o trimestre e no 1o trimestre de gestação."
                },
                correta: "c"
            },
            {
                enunciado: "Nas várias etapas de vida da mulher, as mamas passam por diversos processos de preparo. Assinale a alternativa correta relacionada à puberdade, em mulheres não gestantes.",
                imagem: null,
                alternativas: {
                    a: "A mamogênese ocorre com a contribuição da prolactina e da progesterona que promovem o crescimento dos ductos galactóforos, enquanto que os estrógenos atuam com o objetivo de promover o desenvolvimento do sistema lóbulo-alveolar.",
                    b: "A mamogênese ocorre com a contribuição dos estrógenos que promovem o crescimento dos ductos galactóforos, enquanto que a prolactina e a progesterona atuam com o objetivo de promover o desenvolvimento do sistema lóbulo-alveolar.",
                    c: "A galactogênese ocorre com a contribuição dos estrógenos e prolactina que promovem o crescimento dos ductos galactóforos, enquanto que a progesterona atua com o objetivo de promover o desenvolvimento do sistema lóbulo-alveolar.",
                    d: "A galactogênese ocorre com a contribuição dos estrógenos e da progesterona que promovem o crescimento dos ductos galactóforos, enquanto que a prolactina atua com o objetivo de promover o desenvolvimento do sistema lóbulo-alveolar."
                },
                correta: "c"
            },
            {
                enunciado: "O processo de lactação pode ser dividido em estágios, entre eles o estágio (A) que corresponde ao crescimento e desenvolvimento da glândula mamária, ocorrendo durante todo o período gestacional e o estágio (B) que é a manutenção da lactação já estabelecida e que depende da duração e da frequência do ato de mamar. (A) e (B) correspondem respectivamente aos seguintes estágios da amamentação:",
                imagem: null,
                alternativas: {
                    a: "Mamogênese e lactogênese.",
                    b: "Lactogênese e lactopoese.",
                    c: "Lactogênese e ejeção do leite.",
                    d: "Mamogênese e lactopoese."
                },
                correta: "d"
            },
            {
        enunciado: "Para identificação das vaginoses bacterianas podemos utilizar o diagnóstico diferencial. Assinale a alternativa mais correta para os itens que contribuem para este diagnóstico.",
        imagem: null,
        alternativas: {
            a: "pH do conteúdo vaginal, teste das aminas e característica do corrimento.",
            b: "Característica do corrimento, presença de colpite, ardor.",
            c: "Corrimento tipo coalhada, prurido, pH maior que 7,0.",
            d: "Testes das aminas, presença de colpite e coceira."
        },
        correta: "a"
    },

    {
        enunciado: "Após a menarca fica estabelecido o ciclo menstrual. Em relação à fisiologia do ciclo menstrual é correto afirmar:",
        imagem: null,
        alternativas: {
            a: "Na fase folicular do ciclo, existe aumento do FSH, essencial para a maturação folicular.",
            b: "O hipotálamo é a estrutura responsável pela produção de FSH e LH.",
            c: "Na fase lútea do ciclo, o nível de progesterona é baixo.",
            d: "A inibina possui feedback positivo em relação ao FSH."
        },
        correta: "d"
    },

    // Questão 3 (Gabarito: b)
    {
        enunciado: "A diabete gestacional, além de acarretar complicações para a gestante, também acarretará um risco elevado de malformações fetais. Assinale a alternativa com os sistemas mais comumente afetados.",
        imagem: null,
        alternativas: {
            a: "Nervoso periférico e tegumentar.",
            b: "Cardiovascular e nervoso central.",
            c: "Musculo esquelético e tegumentar.",
            d: "Gastrointestinal e endócrino."
        },
        correta: "b"
    },

    // Questão 4 (Gabarito: a)
    {
        enunciado: "O climatério é uma fase vivenciada pelas mulheres que tem conceitos muito bem definidos pela Organização Mundial de Saúde - OMS. Você, na reunião de grupo da sua UBS começa sua explicação utilizando a definição correta dessa fase, presente na alternativa:",
        imagem: null,
        alternativas: {
            a: "O climatério é definido como uma fase biológica da vida, que compreende a transição entre o período reprodutivo e o não reprodutivo da vida da mulher.",
            b: "O climatério, engloba uma série de alterações patológicas e tem na menopausa a sua data inicial considerando a presença de sintomas diversos.",
            c: "O climatério, pode englobar uma série de alterações e tem na menopausa a sua data inicial sempre após os 48 anos de idade da mulher.",
            d: "O climatério é definido como um processo patológico, que compreende a transição entre o período reprodutivo e o não reprodutivo da vida da mulher."
        },
        correta: "a"
    },

    // Questão 5 (Gabarito: b)
    {
        enunciado: "A OMS adotou valores para o diagnóstico de DMG – Diabetes Mellitus Gestacional. Assinale a alternativa correta sobre esses valores:",
        imagem: null,
        alternativas: {
            a: "Glicemia plasmática de jejum igual ou maior que 95mg/dL, 180mg/dL na primeira hora, 155 mg/dl na segunda hora com sobrecarga de 75 gramas de glicose.",
            b: "Glicemia plasmática de jejum igual ou maior que 126mg/dL e/ou glicemia de 2 horas após a sobrecarga de 75 gramas de glicose igual ou superior a 140mg/gL.",
            c: "Glicemia plasmática de jejum igual ou maior que 95mg/dL, 180mg/dL na primeira hora, 155 mg/dl na segunda hora.",
            d: "Glicemia plasmática pós prandial igual ou maior que 126mg/dL e/ou glicemia de 2 horas após a sobrecarga de 75 gramas de glicose igual ou superior a 140mg/gL."
        },
        correta: "b"
    },

    // Questão 6 (Gabarito: b)
    {
        enunciado: "A gestação não é, absolutamente, necessária para a produção de leite materno. De modo fundamental, a produção e a ejeção do leite materno são devidas, respectivamente, aos hormônios:",
        imagem: null,
        alternativas: {
            a: "Progesterona e ocitocina.",
            b: "Prolactina e ocitocina.",
            c: "Ocitocina e prolactina.",
            d: "Progesterona e prolactina."
        },
        correta: "b"
    },

    // Questão 7 (Gabarito: a)
    {
        enunciado: "Durante a gestação, os hormônios são produzidos e secretados:",
        imagem: null,
        alternativas: {
            a: "Por glândulas endócrinas maternas e pela placenta.",
            b: "Por glândulas endócrinas maternas, fetais e pela placenta.",
            c: "Por glândulas endócrinas fetais e pela placenta.",
            d: "Pelo corpo lúteo e pela placenta, sem participação fetal."
        },
        correta: "a"
    },

    // Questão 8 (Gabarito: c)
    {
        enunciado: "Complicações neonatais em filhos de mãe diabética são comuns, mesmo para aquelas que tiveram o diagnóstico durante a gestação e utilizaram insulina como forma de controle do índice glicêmico. Assinale a alternativa correta sobre a causa da ocorrencia de complicação.",
        imagem: null,
        alternativas: {
            a: "Hipoglicemia materna acarreta hiperglicemia fetal, estimulando o pâncreas fetal, e como resultado uma hipertrofia e hiperplasia das células-beta, com aumento dos níveis de insulina fetal.",
            b: "Hipoglicemia materna acarreta hiperglicemia fetal, estimulando o pâncreas fetal, e como resultado uma hipertrofia e hiperplasia das células-beta, com diminuição dos níveis de insulina fetal.",
            c: "Hiperglicemia materna acarreta hiperglicemia fetal, estimulando o pâncreas fetal, e como resultado uma hipertrofia e hiperplasia das células-beta, com aumento dos níveis de insulina fetal.",
            d: "Hiperglicemia materna acarreta hiperglicemia fetal, estimulando o pâncreas fetal, e como resultado uma hipertrofia e hiperplasia das células-beta, com diminuição dos níveis de insulina fetal."
        },
        correta: "c"
    },

    // Questão 9 (Gabarito: c)
    {
        enunciado: "Assinale a alternativa que refere quais são os critérios utilizados para o diagnóstico do diabetes mellitus gestacional?",
        imagem: null,
        alternativas: {
            a: "A identificação de qualquer grau de intolerância a carboidratos diagnosticada pela primeira vez na gestação.",
            b: "Valores de glicemia de jejum igual ou maior que 126 mg/dL na primeira consulta de pré-natal.",
            c: "Glicemia de jejum na primeira consulta de pré-natal entre 92 e 125 mg/dL ou teste de tolerância à glicose (24a a 28a semana) alterado.",
            d: "Hemoglobina glicada maior ou igual a 6,5% na primeira consulta de pré-natal ou glicemia ocasional maior ou igual a 200 mg/dL."
        },
        correta: "c"
    },

    // Questão 10 (Gabarito: a)
    {
        enunciado: "Os mecanismos para instalação da candidíase estão associados a uma faixa etária exclusiva: mulheres na menacme. É rara em crianças ou na menopausa. Assinale a justificativa correta.",
        imagem: null,
        alternativas: {
            a: "A colonização do trato genital por fungos é hormônio dependente, justificando a não ocorrência nos extremos de menor exposição hormonal.",
            b: "A proliferação fúngica não é dependente de hormônios, e sim de uma predisposição específica de algumas mulheres.",
            c: "Exclusividade do menacme, período de muita instabilidade hormonal, levando a alterações e muita instabilidade ao pH vaginal, favorecendo ao aparecimento dos fungos.",
            d: "Por haver uma mudança muito drástica no pH vaginal das mulheres em período fértil favorece que mulheres no período menstrual tenham uma maior pré-disposição para a candidíase."
        },
        correta: "a"
    },

    // Questão 11 (Gabarito: b)
    {
        enunciado: "A sucção, além de estimular a produção de ocitocina, provoca a inibição de um neurotransmissor inibitório da prolactina no hipotálamo, permitindo, assim, a produção de prolactina. O neurotransmissor inibido é:",
        imagem: null,
        alternativas: {
            a: "Noradrenalina.",
            b: "Dopamina.",
            c: "Acetilcolina.",
            d: "Serotonina."
        },
        correta: "b"
    },

    // Questão 12 (Gabarito: a)
    {
        enunciado: "Considere as afirmações em relação às modificações gravídicas: I- A massa eritroide da gestante diminui. II- O volume plasmático aumenta na gestação. III- A atividade da eritropoetina diminui na gestação. Assinale a alternativa correta:",
        imagem: null,
        alternativas: {
            a: "Apenas a afirmação II é correta.",
            b: "São verdadeiras as afirmações II e III.",
            c: "São verdadeiras as afirmações I e II.",
            d: "Todas as afirmações são corretas."
        },
        correta: "a"
    },

    // Questão 13 (Gabarito: d)
    {
        enunciado: "Assinale a alternativa que completa corretamente a afirmação abaixo. A necessidade de ferro da gestante ____________________ por haver ___________________ produção de eritrócitos, embora ocorra _________________ da concentração de hemoglobina na gestante.",
        imagem: null,
        alternativas: {
            a: "Aumenta; maior; aumento.",
            b: "Diminui; diminuição; aumento.",
            c: "Diminui; menor; diminuição.",
            d: "Aumenta; maior; diminuição."
        },
        correta: "d"
    },

    // Questão 14 (Gabarito: b)
    {
        enunciado: "A resistência periférica à insulina e um aumento na produção de insulina pelas células beta do pâncreas são características comuns da gestação. Essas alterações ocorrem pela participação de vários hormônios considerados diabetogênicos. Assinale a alternativa que cita tais hormônios:",
        imagem: null,
        alternativas: {
            a: "Progesterona, prolactina e BHCG.",
            b: "Prolactina, cortisol, lactogênio placentário.",
            c: "Prolactina, BHCG, lactogênio placentário.",
            d: "Hormônio de crescimento, prolactina, cortisol."
        },
        correta: "b"
    },

    // Questão 15 (Gabarito: b)
    {
        enunciado: "A hipertensão arterial sistêmica (HAS) é resultado de alterações em diferentes órgãos e sua fisiopatologia é variável. Analise as afirmações abaixo e escolha a alternativa correta: I. Aumento do débito cardíaco ou da resistência vascular periférica contribuem para a elevação mantida da pressão arterial. II. A instalação e o desenvolvimento da hipertensão arterial sistêmica são eventos rápidos e precoces. III. O aumento do débito cardíaco pode ser decorrente do aumento do volume plasmático (pré-carga). IV. Na HAS há diminuição dos valores séricos de catecolaminas e reatividade vascular diminuída à estimulação alfa-adrenérgica. V. A depressão do controle reflexo dos barorreceptores aórticos e carotídeos parece ser fator importante na patogênese da HAS.",
        imagem: null,
        alternativas: {
            a: "Somente I, III e V.",
            b: "Somente I, III e V.",
            c: "Somente II, III e IV.",
            d: "Somente I, II e III."
        },
        correta: "b"
    },

    // Questão 16 (Gabarito: d)
    {
        enunciado: "De acordo com a classificação recomendada pela National High Blood Pressure Education Program (NHBPEP), adotada pelas American College of Obstetricians and Gynecologists, qual é a definição de hipertensão gestacional?",
        imagem: null,
        alternativas: {
            a: "Hipertensão arterial identificada entre a 12a e 16a semanas de gestação, com outro comprometimento clínico ou laboratorial, com normalização após o parto.",
            b: "Hipertensão identificada a qualquer momento durante a gestação e que pode ou não apresentar outros comprometimentos clínicos.",
            c: "Hipertensão arterial identificada antes da 20a semana de gestação ou ainda que permaneça além da 12a semana de puerpério.",
            d: "Hipertensão arterial identificada após a 20a semana de gestação, sem outro comprometimento clínico ou laboratorial, com normalização após o parto."
        },
        correta: "d"
    },

    // Questão 17 (Gabarito: c)
    {
        enunciado: "A inibição da secreção do leite materno é controlada por alguns hormônios, exceto:",
        imagem: null,
        alternativas: {
            a: "Progesterona.",
            b: "Estrogênio.",
            c: "Ocitocina.",
            d: "Hormônio inibidor da prolactina."
        },
        correta: "c"
    },

    // Questão 18 (Gabarito: a)
    {
        enunciado: "Escolha a alternativa que completa corretamente a afirmativa abaixo: Na gestante normal, o nível de glicose sérica pode estar discretamente _________. Há _______ oferta desse nutriente para o feto, por difusão facilitada através da placenta.",
        imagem: null,
        alternativas: {
            a: "Diminuído; maior.",
            b: "Aumentado; maior.",
            c: "Aumentado; menor.",
            d: "Diminuído; menor."
        },
        correta: "a"
    },

    // Questão 19 (Gabarito: a)
    {
        enunciado: "Assinale a alternativa com os exames que serão realizados em uma grávida para subsidiar a hipótese de Síndrome Hipertensiva Gestacional (SHG.)",
        imagem: null,
        alternativas: {
            a: "Contagem de plaquetas, tempo de coagulação, AST, ureia.",
            b: "Hemograma completo, sódio, potássio, bilirrubina.",
            c: "Creatinina, ureia, sódio, potássio.",
            d: "Pesquisa de proteinúria, ureia, creatinina, enzimas hepáticas."
        },
        correta: "a"
    },

    // Questão 20 (Gabarito: c)
    {
        enunciado: "Enquanto que a mama da criança, do nascimento até a fase pré-puberal, é constituida de ductos e poucos ou nenhum alvéolo, a mama na adolescência se desenvolve com deposição de gordura e crescimento dos sistemas de ductos e alvéolos. Isso ocorre, principalmente, por ação de:",
        imagem: null,
        alternativas: {
            a: "Progesterona e insulina.",
            b: "Cortisol e GH.",
            c: "Estrogênio e progesterona.",
            d: "Estrogênio e prolactina."
        },
        correta: "c"
    },

    // Questão 21 (Gabarito: d)
    {
        enunciado: "Durante a gestação, a mama se desenvolve pela variada influência hormonal. Um hormônio fundamental que, juntamente com estrogênio e progesterona, desenvolve ductos e alvéolos é:",
        imagem: null,
        alternativas: {
            a: "Insulina.",
            b: "Ocitocina.",
            c: "hPL.",
            d: "Prolactina."
        },
        correta: "d"
    },

    // Questão 22 (Gabarito: a)
    {
        enunciado: "A prevalência da síndrome pré-menstrual é elevada, porém apenas de 3 a 15% das mulheres sofrem sintomas intensos. Sendo assim é correto afirmar, quanto à patogenia, que:",
        imagem: null,
        alternativas: {
            a: "até o momento não há nenhuma teoria satisfatória aplicável a todas as pacientes que apresentam tensão pré-menstrual.",
            b: "a relação entre progesterona e distúrbios do humor durante esta fase permite inferir sua participação.",
            c: "a teoria dos estrógenos está excluída desta síndrome uma vez que eles não participam desta fase.",
            d: "o sistema endócrino-reprodutor não converge para efetuar a regulação do comportamento."
        },
        correta: "a"
    },

    // Questão 23 (Gabarito: b)
    {
        enunciado: "Assinale a alternativa correta sobre a caracterização da eclâmpsia.",
        imagem: null,
        alternativas: {
            a: "Presença de convulsões tônico-clônicas generalizadas ou coma em mulher sem qualquer quadro hipertensivo, causadas por epilepsia ou qualquer outra doença convulsiva, podendo ocorrer durante a gravidez, no parto e no puerpério imediato.",
            b: "Presença de convulsões tônico-clônicas generalizadas ou coma em mulher com qualquer quadro hipertensivo, não causada por epilepsia ou qualquer outra doença convulsiva, podendo ocorrer durante a gravidez, no parto e no puerpério imediato.",
            c: "Presença de convulsões tônico-clônicas generalizadas ou coma em mulher com qualquer quadro hipertensivo, não causadas por epilepsia ou qualquer outra doença convulsiva, não ocorre durante a gravidez, no parto e no puerpério imediato.",
            d: "Presença de convulsões tônico-clônicas generalizadas ou coma em mulher sem qualquer quadro hipertensivo, causadas por epilepsia ou qualquer outra doença convulsiva, podendo e no puerpério imediato."
        },
        correta: "b"
    },

    // Questão 24 (Gabarito: d)
    {
        enunciado: "Após uma anamnese e exame de A.M.M.B, 22 anos, constatou-se a presença de corrimento branco tipo leite talhado grosso, prurido intenso, relato de piora dos sintomas na fase pré-menstrual, medida do pH estava igual 4,0. Com base nestes dados, assinale a alternativa que melhor caracteriza o provável diagnóstico:",
        imagem: null,
        alternativas: {
            a: "Clamydia tracomatis.",
            b: "Trichomonas vaginalis.",
            c: "Neisseria gonorrheae.",
            d: "Cândida albicans."
        },
        correta: "d"
    },

    // Questão 25 (Gabarito: b)
    {
        enunciado: "Adolescente com vida sexual ativa procurou a UBS por apresentar um corrimento com as seguintes características: secreção vaginal fina, cor verde-acinzentada e odor desagradável (de peixe). Qual dos agentes listados abaixo produz quadro clínico semelhante?",
        imagem: null,
        alternativas: {
            a: "Clostridium perfringens – Gran negativo.",
            b: "Gardnerella vaginalis - bacilo Gram-negativo.",
            c: "Neisseria gonorrhoeae – Gram positivo.",
            d: "Trichomonas vaginalis – protozoário."
        },
        correta: "b"
    },

    // Questão 26 (Gabarito: a)
    {
        enunciado: "Sua paciente precisou retirar os ovários em uma cirurgia, e você está analisando o exame de niveis hormonais dela. Qual alternativa cita os hormônios que certamente deixarão de ser produzidos nesta situação atual?",
        imagem: null,
        alternativas: {
            a: "Estrógeno e progesterona.",
            b: "LH e estrógeno.",
            c: "FSH e estrógeno.",
            d: "FSH e progesterona."
        },
        correta: "a"
    },

    // Questão 27 (Gabarito: b)
    {
        enunciado: "O diabetes mellitus confirmado previamente, durante a gestação ou pós parto, poderá levar a várias complicações clínicas maternas. Assinale a alternativa corretas com possíveis complicações.",
        imagem: null,
        alternativas: {
            a: "Hipotensão arterial e retinopatia diabética.",
            b: "Hipertensão arterial e nefropatia diabética.",
            c: "Retinopatia diabética e alterações cardíacas.",
            d: "Nefropatia diabética e gastrite."
        },
        correta: "b"
    },

    // Questão 28 (Gabarito: a)
    {
        enunciado: "Um casal, recém casado, procura você no seu consultório para auxílio no planejamento familiar. Você orienta o casal informando que um óvulo pode sobreviver cerca de 48 horas e um espermatozóide, cerca de 72 horas. Esta mulher lhe informa que possui um ciclo menstrual padrão e que deseja evitar, com boa margem de segurança, a gravidez. Você então orienta que o casal não deve manter relações sexuais no período representado pela alternativa:",
        imagem: null,
        alternativas: {
            a: "entre o 8o e o 16o dia do ciclo.",
            b: "entre o 10o e o 18o dia do ciclo.",
            c: "entre o 1o e o 8o dia do ciclo.",
            d: "entre o 1o e o 20o dia do ciclo."
        },
        correta: "a"
    },

    // Questão 29 (Gabarito: c)
    {
        enunciado: "Assinale a alternativa correta que diferencia corrimento genital fisiológico do patológico, respectivamente.",
        imagem: null,
        alternativas: {
            a: "Corrimento genital fisiológico é a secreção, que em geral, não causa desconforto para a mulher, enquanto o corrimento genital patológico, chamado de leucorreia, é caracterizado pela presença de secreção vulvo vaginal excessiva, causando desconforto determinado exclusivamente por bactérias diferentes da microbiota.",
            b: "Corrimento genital fisiológico é a secreção, que em geral, causa desconforto para a mulher, enquanto o corrimento genital patológico, chamado de leucorreia, é caracterizado pela presença de secreção vulvovaginal excessiva, causando desconforto determinado por agente etiológico específico.",
            c: "Corrimento genital fisiológico é a secreção, que em geral, não causa desconforto para a mulher, enquanto o corrimento genital patológico, chamado de leucorreia, é caracterizado pela presença de secreção vulvovaginal excessiva, causando desconforto determinado por diferentes agentes etiológicos.",
            d: "Corrimento genital fisiológico é a secreção, que em geral, não causa desconforto para a mulher, embora seja causado por fungos da microbiota normal, enquanto o corrimento genital patológico, chamado de leucorreia, é caracterizado pela presença de secreção vulvovaginal excessiva, causando desconforto determinado por diferentes agentes etiológicos."
        },
        correta: "c"
    },

    // Questão 30 (Gabarito: a)
    {
        enunciado: "Em relação ao processo reprodutivo humano, considere as afirmativas abaixo e escolha a alternativa que reune todas afirmações verdadeiras: I. O hormônio dosado por testes de gravidez mais comuns é a gonadotrofina coriônica, a qual impede a involução do corpo lúteo no início da gravidez. II. A fase proliferativa do ciclo menstrual, que ocorre antes da ovulação, cursa com altos níveis de progesterona. III. Uma alta secreção de hormônio luteinizante (LH) é o fator responsável pela maturação do óvulo. IV. Se o ciclo menstrual durar 32 dias ao invés de 28, haverá maior probabilidade de que a ovulação ocorra no décimo sexto dia. V. Altos níveis de testosterona na circulação sanguínea podem inibir a liberação de LH ou ICSH pela hipófise masculina.",
        imagem: null,
        alternativas: {
            a: "apenas I, III e IV são verdadeiras.",
            b: "todas são verdadeiras.",
            c: "apenas II, III e V são verdadeiras.",
            d: "apenas II, IV e V são verdadeiras."
        },
        correta: "a"
    },

    // Questão 31 (Gabarito: c)
    {
        enunciado: "Assinale a alternativa correta sobre a caracterização da candidíase recorrente.",
        imagem: null,
        alternativas: {
            a: "É caracterizada pela presença de quatro ou mais episódios sintomáticos/mês, comum na maioria das mulheres em idade fértil.",
            b: "É caracterizada pela presença de quatro ou mais episódios sintomáticos/ano, comum na maioria das mulheres após relações sexuais.",
            c: "É caracterizada pela presença de quatro ou mais episódios sintomáticos/ano, comum na maioria das mulheres em idade fértil.",
            d: "É caracterizada pela presença de quatro ou mais episódios sintomáticos/ano, comum na maioria das mulheres no climatério."
        },
        correta: "c"
    },

    // Questão 32 (Gabarito: c)
    {
        enunciado: "O sistema imunológico tem participação importante no controle da Candida albicans. Assinale a alternativa correta sobre as células envolvidas na primeira linha de defesa neste processo.",
        imagem: null,
        alternativas: {
            a: "Macrófagos, monócitos.",
            b: "Neutrófilos, células NK.",
            c: "Neutrófilos, macrófagos.",
            d: "Macrófagos, células Nk."
        },
        correta: "c"
    },

    // Questão 33 (Gabarito: b)
    {
        enunciado: "Em relação à fisiopatologia da diabetes mellitus gestacional (DMG) é correto afirmar que:",
        imagem: null,
        alternativas: {
            a: "Na fase catabólica do metabolismo energético na gestação observa-se uma queda na glicemia das gestantes, principalmente após períodos prolongados de jejum materno.",
            b: "Hormônios secretados pela placenta, como o de crescimento, o cortisol e o hormônio lactogênico placentário são responsáveis pelo aumento da resistência à insulina.",
            c: "Na fase catabólica do metabolismo energético na gestação observa-se uma queda na glicemia das gestantes, principalmente após períodos prolongados de jejum materno.",
            d: "Durante a gestação ocorre uma diminuição da resistência periférica à insulina e consequente redução da produção deste hormônio pelas células beta do pâncreas."
        },
        correta: "b"
    },

    // Questão 34 (Gabarito: a)
    {
        enunciado: "Aproximadamente 12h antes da ovulação ocorre pico de um hormônio fundamental para esse evento. Que hormônio é esse?",
        imagem: null,
        alternativas: {
            a: "LH.",
            b: "FSH.",
            c: "GnRh.",
            d: "Progesterona."
        },
        correta: "a"
    },

    // Questão 35 (Gabarito: c)
    {
        enunciado: "O seio galactóforo é importante durante a sucção das mamas pela criança pois esta estrutura representa:",
        imagem: null,
        alternativas: {
            a: "O tecido conjuntivo fibroso mamário onde há fixação e sustentação às glândulas.",
            b: "A unidade acinosa secretora e saculiforme das glândulas mamárias.",
            c: "A dilatação dos ductos principais dos lobos glandulares na projeção da aréola.",
            d: "O conjunto de estruturas ductais responsáveis pela drenagem do leite materno."
        },
        correta: "c"
    },

    // Questão 36 (Gabarito: d)
    {
        enunciado: "As mudanças ovarianas que ocorrem durante o ciclo menstrual dependem inteiramente dos hormônios gonadotrópicos FSH e LH, que são secretados por qual glândula?",
        imagem: null,
        alternativas: {
            a: "Prostaglandina.",
            b: "Hipotálamo.",
            c: "Hipófise posterior.",
            d: "Hipófise anterior."
        },
        correta: "d"
    },

    // Questão 37 (Gabarito: d)
    {
        enunciado: "A ejeção do leite dos alvéolos para os ductos, e então para o exterior, acontece como consequência da contração de células mioepiteliais em resposta a:",
        imagem: null,
        alternativas: {
            a: "Prolactina.",
            b: "Insulina.",
            c: "Estrogênio.",
            d: "Ocitocina."
        },
        correta: "d"
    },

    // Questão 38 (Gabarito: a)
    {
        enunciado: "Sobre as alterações que ocorrem na gestante portadora de HAS crônica, escolha a alternativa que reúne apenas afirmações corretas: I. Na gestante normal ocorre aumento do volume plasmático em 40% acima dos níveis pré-gestacionais, além da elevação do débito cardíaco. II. Gestantes previamente hipertensas apresentam maiores incrementos no volume plasmático, quando comparadas às normotensas. III. Queda da resistência vascular periférica nos dois primeiros trimestres da gestação pode mascarar a hipertensão arterial de mulheres com hipertensão leve. IV. Tanto a pressão arterial sistólica quanto a diastólica diminuem com o aumento da idade materna e a paridade.",
        imagem: null,
        alternativas: {
            a: "I e III.",
            b: "III e IV.",
            c: "I e II.",
            d: "II e IV."
        },
        correta: "a"
    },

    // Questão 39 (Gabarito: d)
    {
        enunciado: "Apesar da fisiopatologia da eclâmpsia não estar plenamente esclarecida, alguns estudos têm mostrado alguns mecanismos e substâncias envolvidas no comprometimento do SNC. Qual das alternativas abaixo apresenta um fator não relacionado a esta alteração na eclâmpsia?",
        imagem: null,
        alternativas: {
            a: "Encefalopatia hipertensiva.",
            b: "Edema cerebral.",
            c: "Isquemia cerebral.",
            d: "Hidrocefalia."
        },
        correta: "d"
    },

    // Questão 40 (Gabarito: c)
    {
        enunciado: "Assinale a alternativa mais correta que caracteriza o processo fisiopatológico dos corrimentos genitais.",
        imagem: null,
        alternativas: {
            a: "Decorrente da atuação de agentes infecciosos ou não, mas que tenham agressividade e que não alterem os mecanismos de defesa.",
            b: "Decorrente da atuação de agentes infecciosos, mas que não tenham agressividade e sejam capazes de alterar os mecanismos de defesa.",
            c: "Decorrente da atuação de agentes infecciosos ou não, mas que tenham agressividade e sejam capazes de alterar os mecanismos de defesa.",
            d: "Decorrente da atuação de agentes infecciosos, mas que não tenham agressividade e não alterem os mecanismos de defesa."
        },
        correta: "c"
    },

        ];
    </script>
</body>
</html>
